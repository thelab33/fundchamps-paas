<!-- Modern Elite Donation Form Partial -->
<form
  action="{{ url_for('main.donate') }}"
  method="POST"
  id="donation-form"
  class="max-w-md mx-auto bg-gradient-to-br from-zinc-900 via-zinc-950 to-black/90 shadow-2xl rounded-3xl px-8 py-10 space-y-8 ring-2 ring-yellow-400/10
         transition-all duration-400"
  autocomplete="off"
  novalidate
  aria-label="Quick donation"
>
  {{ form.hidden_tag() }} <!-- CSRF token -->

  <!-- ðŸ’¸ Donation Amount â€” Floating Label -->
  <div class="relative">
    <input
      type="number"
      id="donation-amount"
      name="amount"
      required
      min="5"
      max="10000"
      step="1"
      placeholder=" "
      inputmode="numeric"
      class="peer block w-full bg-zinc-900/80 text-yellow-100 placeholder-transparent rounded-2xl px-5 py-5 text-2xl font-black shadow-inner focus:ring-2 focus:ring-yellow-400 focus:outline-none transition-all duration-300"
      aria-describedby="donation-amount-help"
    />
    <label
      for="donation-amount"
      class="absolute left-5 top-5 text-lg text-yellow-200 font-bold pointer-events-none transition-all duration-300
             peer-placeholder-shown:top-5 peer-placeholder-shown:text-lg peer-placeholder-shown:text-yellow-200/80
             peer-focus:-top-3 peer-focus:text-base peer-focus:text-yellow-400 peer-focus:bg-zinc-950 peer-focus:px-2 peer-focus:rounded
             bg-transparent"
      >Amount (USD)</label>
    <span class="absolute right-5 top-5 text-yellow-300 text-xl font-bold select-none pointer-events-none">$</span>
    <p id="donation-amount-help" class="text-xs text-yellow-400 mt-3 ml-1">
      <span class="font-bold">Minimum $5</span> &mdash; every dollar goes to kids.
    </p>
  </div>

  <!-- ðŸ¦ Payment Method â€” Card/PayPal toggles -->
  <div>
    <fieldset class="flex gap-3 justify-center border-none p-0 mb-1" aria-describedby="payment-method-help">
      <legend class="sr-only">Payment Method</legend>
      <button
        type="button"
        id="choose-stripe"
        aria-pressed="true"
        class="payment-toggle selected flex-1 flex items-center justify-center gap-2 bg-zinc-800 text-yellow-200 font-bold px-5 py-3 rounded-xl shadow transition-all hover:bg-zinc-700 focus:ring-2 focus:ring-yellow-400"
        tabindex="0"
      >
        <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="6" width="18" height="12" rx="3" stroke-width="2"/><path d="M7 10h.01M17 10h.01M12 15v.01"/></svg>
        Card
      </button>
      <button
        type="button"
        id="choose-paypal"
        aria-pressed="false"
        class="payment-toggle flex-1 flex items-center justify-center gap-2 bg-zinc-800 text-yellow-200 font-bold px-5 py-3 rounded-xl shadow transition-all hover:bg-zinc-700 focus:ring-2 focus:ring-yellow-400"
        tabindex="0"
      >
        <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 24 24"><rect x="2" y="6" width="20" height="12" rx="4" /><text x="12" y="16" text-anchor="middle" font-size="8" fill="#1a202c">PP</text></svg>
        PayPal
      </button>
    </fieldset>
    <p id="payment-method-help" class="text-xs text-yellow-400 text-center mb-2">100% Secure. Choose Card or PayPal.</p>
  </div>

  <!-- ðŸ”’ Stripe Card Input -->
  <div id="stripe-form" class="transition-all duration-300">
    <div id="stripe-element" class="rounded-2xl bg-zinc-900/60 px-4 py-5 shadow-inner" aria-label="Credit or debit card input"></div>
  </div>

  <!-- ðŸŸ¦ PayPal Button Container -->
  <div id="paypal-form" class="hidden transition-all duration-300" aria-hidden="true">
    <div id="paypal-button-container" class="rounded-2xl bg-zinc-900/60 px-4 py-5 shadow-inner"></div>
  </div>

  <!-- ðŸš€ Donate Button -->
  <div class="pt-4">
    <button
      type="submit"
      id="donate-button"
      class="w-full py-4 rounded-full text-2xl font-black bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 text-zinc-900 shadow-xl ring-2 ring-yellow-300 transition-all hover:scale-105 hover:bg-yellow-200 focus-visible:ring-4 focus-visible:ring-yellow-400 active:scale-97 disabled:opacity-60 disabled:cursor-not-allowed"
      aria-live="polite"
      aria-disabled="false"
    >
      Donate Now
    </button>
    <p class="text-xs text-yellow-400 text-center mt-3">Powered by <span class="font-bold">Stripe & PayPal</span></p>
  </div>
</form>

<style>
/* Floating Label Modern Style */
#donation-form label {
  pointer-events: none;
}
#donation-form .peer:focus ~ label,
#donation-form .peer:not(:placeholder-shown) ~ label {
  top: -1.4rem !important;
  left: 1.2rem;
  font-size: 1rem !important;
  color: #fbbf24 !important;
  background: #18181b !important;
  padding: 0 0.5em;
  border-radius: 0.5em;
  z-index: 2;
}
.payment-toggle.selected,
.payment-toggle[aria-pressed="true"] {
  background: linear-gradient(90deg,#fde68a,#fbbf24,#fde68a);
  color: #262626;
  box-shadow: 0 2px 18px 0 #fbbf2420;
  font-weight: 800;
  border: 2px solid #fbbf24;
}
.payment-toggle:not(.selected):not([aria-pressed="true"]) {
  background: #18181b;
  color: #fbbf24;
  border: 1.5px solid #444;
}
#donation-form .peer:focus {
  outline: none;
  box-shadow: 0 0 0 2px #fbbf24;
}
#donation-form input::-webkit-inner-spin-button,
#donation-form input::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0;}
#donation-form input[type=number] { appearance: textfield; }
</style>

<script>
  // Toggle between Card/PayPal
  (() => {
    const chooseStripe = document.getElementById('choose-stripe');
    const choosePayPal = document.getElementById('choose-paypal');
    const stripeForm = document.getElementById('stripe-form');
    const paypalForm = document.getElementById('paypal-form');
    const methodField = document.getElementById('payment-method') || (() => {
      // Fallback for hidden select if you still want to POST the value
      let s = document.createElement('input');
      s.type = 'hidden'; s.name = 'payment_method'; s.value = 'stripe'; s.id = 'payment-method';
      document.getElementById('donation-form').appendChild(s); return s;
    })();

    chooseStripe.addEventListener('click', () => {
      chooseStripe.classList.add('selected');
      chooseStripe.setAttribute('aria-pressed', 'true');
      choosePayPal.classList.remove('selected');
      choosePayPal.setAttribute('aria-pressed', 'false');
      stripeForm.classList.remove('hidden');
      paypalForm.classList.add('hidden');
      paypalForm.setAttribute('aria-hidden', 'true');
      methodField.value = 'stripe';
    });
    choosePayPal.addEventListener('click', () => {
      choosePayPal.classList.add('selected');
      choosePayPal.setAttribute('aria-pressed', 'true');
      chooseStripe.classList.remove('selected');
      chooseStripe.setAttribute('aria-pressed', 'false');
      stripeForm.classList.add('hidden');
      paypalForm.classList.remove('hidden');
      paypalForm.setAttribute('aria-hidden', 'false');
      methodField.value = 'paypal';
    });
  })();

  // Stripe/PayPal JS integrations remain as in your script (see your Stripe setup).
</script>

